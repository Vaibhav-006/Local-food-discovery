<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - FoodDiscover</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-2 text-2xl font-bold text-orange-600 hover:text-orange-700 transition-colors">
                        <i class="fas fa-utensils"></i>
                        <span>FoodDiscover</span>
                    </a>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="search.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-search"></i>
                        <span>Discover</span>
                    </a>
                    <a href="upload.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-plus"></i>
                        <span>Upload</span>
                    </a>
                    <a href="ai-recommendations.html" class="text-gray-700 hover:text-orange-600 transition-colors">
                        <span>AI Recommendations</span>
                    </a>
                    <a href="dashboard.html" class="flex items-center space-x-2 text-orange-600 font-semibold">
                        <i class="fas fa-user"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="login.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login</span>
                    </a>
                    <a href="register.html" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                        <span>Sign Up</span>
                    </a>
                </div>
                
                <div class="md:hidden">
                    <button id="nav-toggle" class="text-gray-700 hover:text-orange-600 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile menu -->
            <div id="nav-menu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-4">
                    <a href="search.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-search"></i>
                        <span>Discover</span>
                    </a>
                    <a href="upload.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-plus"></i>
                        <span>Upload</span>
                    </a>
                    <a href="ai-recommendations.html" class="text-gray-700 hover:text-orange-600 transition-colors">
                        <span>AI Recommendations</span>
                    </a>
                    <a href="dashboard.html" class="flex items-center space-x-2 text-orange-600 font-semibold">
                        <i class="fas fa-user"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="login.html" class="flex items-center space-x-2 text-gray-700 hover:text-orange-600 transition-colors">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login</span>
                    </a>
                    <a href="register.html" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-center">
                        <span>Sign Up</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Content -->
    <div class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Dashboard Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Welcome back, Food Explorer!</h1>
                <p class="text-gray-600">Here's what's happening with your food discoveries today.</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                            <i class="fas fa-utensils text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Discoveries</p>
                            <p class="text-2xl font-semibold text-gray-900">24</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-green-100 text-green-600">
                            <i class="fas fa-heart text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Likes Received</p>
                            <p class="text-2xl font-semibold text-gray-900">156</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                            <i class="fas fa-star text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Average Rating</p>
                            <p class="text-2xl font-semibold text-gray-900">4.8</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                            <i class="fas fa-users text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Followers</p>
                            <p class="text-2xl font-semibold text-gray-900">89</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column - Profile & Quick Actions -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Profile Card -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="text-center mb-6">
                            <div class="w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-user text-3xl text-orange-600"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-900">John Doe</h3>
                            <p class="text-gray-600">Food Explorer</p>
                            <p class="text-sm text-gray-500">Member since January 2024</p>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Level</span>
                                <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-sm font-medium">Expert</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Points</span>
                                <span class="font-semibold text-gray-900">2,450</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Rank</span>
                                <span class="font-semibold text-gray-900">#12</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h4>
                        <div class="space-y-3">
                            <a href="upload.html" class="flex items-center p-3 rounded-lg border border-gray-200 hover:border-orange-300 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-plus text-orange-600 mr-3"></i>
                                <span class="text-gray-700">Upload New Food</span>
                            </a>
                            <a href="search.html" class="flex items-center p-3 rounded-lg border border-gray-200 hover:border-orange-300 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-search text-orange-600 mr-3"></i>
                                <span class="text-gray-700">Discover Food</span>
                            </a>
                            <a href="ai-recommendations.html" class="flex items-center p-3 rounded-lg border border-gray-200 hover:border-orange-300 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-robot text-orange-600 mr-3"></i>
                                <span class="text-gray-700">AI Recommendations</span>
                            </a>
                            <a href="#" class="flex items-center p-3 rounded-lg border border-gray-200 hover:border-orange-300 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-cog text-orange-600 mr-3"></i>
                                <span class="text-gray-700">Settings</span>
                            </a>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h4>
                        <div class="space-y-3">
                            <div class="flex items-start space-x-3">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-700">Liked "Pizza Margherita"</p>
                                    <p class="text-xs text-gray-500">2 hours ago</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-700">Uploaded "Sushi Roll"</p>
                                    <p class="text-xs text-gray-500">1 day ago</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-700">Received 5-star rating</p>
                                    <p class="text-xs text-gray-500">2 days ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Main Content -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- My Food Discoveries -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h4 class="text-lg font-semibold text-gray-900">My Food Discoveries</h4>
                            <a href="#" class="text-orange-600 hover:text-orange-700 text-sm font-medium">View All</a>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=100&h=100&fit=crop" alt="Pizza Margherita" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h5 class="font-medium text-gray-900">Pizza Margherita</h5>
                                        <p class="text-sm text-gray-600">Pizza Palace, New York</p>
                                        <div class="flex items-center mt-2">
                                            <div class="flex items-center text-yellow-500">
                                                <i class="fas fa-star text-sm mr-1"></i>
                                                <span class="text-sm text-gray-700">4.8</span>
                                            </div>
                                            <span class="mx-2 text-gray-300">•</span>
                                            <span class="text-sm text-gray-500">24 likes</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-col space-y-2">
                                        <button class="text-gray-400 hover:text-orange-600 transition-colors">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-red-600 transition-colors">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=100&h=100&fit=crop" alt="Sushi Roll" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h5 class="font-medium text-gray-900">Sushi Roll</h5>
                                        <p class="text-sm text-gray-600">Sushi Master, Los Angeles</p>
                                        <div class="flex items-center mt-2">
                                            <div class="flex items-center text-yellow-500">
                                                <i class="fas fa-star text-sm mr-1"></i>
                                                <span class="text-sm text-gray-700">4.9</span>
                                            </div>
                                            <span class="mx-2 text-gray-300">•</span>
                                            <span class="text-sm text-gray-500">31 likes</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-col space-y-2">
                                        <button class="text-gray-400 hover:text-orange-600 transition-colors">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-red-600 transition-colors">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="https://images.unsplash.com/photo-1563379091339-03246963c8f9?w=100&h=100&fit=crop" alt="Burger Deluxe" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h5 class="font-medium text-gray-900">Burger Deluxe</h5>
                                        <p class="text-sm text-gray-600">Burger Joint, Chicago</p>
                                        <div class="flex items-center mt-2">
                                            <div class="flex items-center text-yellow-500">
                                                <i class="fas fa-star text-sm mr-1"></i>
                                                <span class="text-sm text-gray-700">4.7</span>
                                            </div>
                                            <span class="mx-2 text-gray-300">•</span>
                                            <span class="text-sm text-gray-500">18 likes</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-col space-y-2">
                                        <button class="text-gray-400 hover:text-orange-600 transition-colors">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-red-600 transition-colors">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-start space-x-3">
                                    <img src="https://images.unsplash.com/photo-1559314809-0d155014e29e?w=100&h=100&fit=crop" alt="Pad Thai" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h5 class="font-medium text-gray-900">Pad Thai</h5>
                                        <p class="text-sm text-gray-600">Thai Spice, San Francisco</p>
                                        <div class="flex items-center mt-2">
                                            <div class="flex items-center text-yellow-500">
                                                <i class="fas fa-star text-sm mr-1"></i>
                                                <span class="text-sm text-gray-700">4.6</span>
                                            </div>
                                            <span class="mx-2 text-gray-300">•</span>
                                            <span class="text-sm text-gray-500">22 likes</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-col space-y-2">
                                        <button class="text-gray-400 hover:text-orange-600 transition-colors">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-red-600 transition-colors">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Chart -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Monthly Activity</h4>
                        <div class="h-64 bg-gray-50 rounded-lg flex items-center justify-center">
                            <div class="text-center text-gray-500">
                                <i class="fas fa-chart-line text-4xl mb-2"></i>
                                <p>Chart visualization would go here</p>
                                <p class="text-sm">Monthly uploads, likes, and engagement</p>
                            </div>
                        </div>
                    </div>

                    <!-- Goals & Achievements -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">Goals & Achievements</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="font-medium text-gray-900">Monthly Goal</h5>
                                    <span class="text-sm text-gray-500">8/10 uploads</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-orange-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                                <p class="text-sm text-gray-600 mt-2">Upload 10 food discoveries this month</p>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="font-medium text-gray-900">Rating Goal</h5>
                                    <span class="text-sm text-gray-500">4.8/5.0</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 96%"></div>
                                </div>
                                <p class="text-sm text-gray-600 mt-2">Maintain 4.5+ average rating</p>
                            </div>
                        </div>

                        <div class="mt-6">
                            <h5 class="font-medium text-gray-900 mb-3">Recent Achievements</h5>
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-trophy text-yellow-600 text-sm"></i>
                                </div>
                                <span class="text-sm text-gray-700">First 100 likes milestone!</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-16 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h3 class="text-2xl font-bold text-orange-400 mb-4">FoodDiscover</h3>
                    <p class="text-gray-300">Your ultimate platform for discovering amazing local food.</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="search.html" class="text-gray-300 hover:text-orange-400 transition-colors">Discover Food</a></li>
                        <li><a href="upload.html" class="text-gray-300 hover:text-orange-400 transition-colors">Upload Food</a></li>
                        <li><a href="ai-recommendations.html" class="text-gray-300 hover:text-orange-400 transition-colors">AI Recommendations</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Account</h4>
                    <ul class="space-y-2">
                        <li><a href="login.html" class="text-gray-300 hover:text-orange-400 transition-colors">Login</a></li>
                        <li><a href="register.html" class="text-gray-300 hover:text-orange-400 transition-colors">Register</a></li>
                        <li><a href="dashboard.html" class="text-gray-300 hover:text-orange-400 transition-colors">Dashboard</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-center">
                <p class="text-gray-400">&copy; 2024 FoodDiscover. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Dashboard specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            let userData = null;
            let userFoods = [];

            // Check if user is logged in
            const token = localStorage.getItem('token');
            if (!token) {
                showNotification('Please login to access dashboard', 'error');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
                return;
            }

            // Load user data and foods
            loadUserData();
            loadUserFoods();

            async function loadUserData() {
                try {
                    const response = await fetch('https://local-food-backend.onrender.com/api/auth/me', {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        userData = data.user;
                        updateUserProfile();
                    } else {
                        showNotification('Session expired. Please login again.', 'error');
                        setTimeout(() => {
                            window.location.href = 'login.html';
                        }, 2000);
                    }
                } catch (error) {
                    console.error('Error loading user data:', error);
                    showNotification('Error loading user data', 'error');
                }
            }

            async function loadUserFoods() {
                try {
                    const response = await fetch('https://local-food-backend.onrender.com/api/foods');
                    const data = await response.json();
                    
                    if (data.success) {
                        userFoods = data.foods || [];
                        updateDashboardStats();
                        updateFoodDiscoveries();
                    }
                } catch (error) {
                    console.error('Error loading foods:', error);
                }
            }

            function updateUserProfile() {
                if (!userData) return;
                
                // Update profile info
                const profileName = document.querySelector('.text-xl.font-semibold.text-gray-900');
                if (profileName) {
                    profileName.textContent = `${userData.firstName} ${userData.lastName}`;
                }
                
                const profileTitle = document.querySelector('.text-gray-600');
                if (profileTitle) {
                    profileTitle.textContent = userData.username || 'Food Explorer';
                }
                
                const memberSince = document.querySelector('.text-sm.text-gray-500');
                if (memberSince) {
                    const joinDate = new Date(userData.createdAt).toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long' 
                    });
                    memberSince.textContent = `Member since ${joinDate}`;
                }
            }

            function updateDashboardStats() {
                const totalDiscoveries = userFoods.length;
                const totalLikes = userFoods.reduce((sum, food) => sum + (food.likes || 0), 0);
                const avgRating = userFoods.length > 0 ? 
                    (userFoods.reduce((sum, food) => sum + (food.rating || 4.5), 0) / userFoods.length).toFixed(1) : '4.5';
                const followers = Math.floor(totalLikes * 0.3); // Simulate followers based on likes

                // Update stats cards
                const statsCards = document.querySelectorAll('.text-2xl.font-semibold.text-gray-900');
                if (statsCards[0]) statsCards[0].textContent = totalDiscoveries;
                if (statsCards[1]) statsCards[1].textContent = totalLikes;
                if (statsCards[2]) statsCards[2].textContent = avgRating;
                if (statsCards[3]) statsCards[3].textContent = followers;

                // Update goals
                const monthlyGoal = document.querySelector('.text-sm.text-gray-500');
                if (monthlyGoal) {
                    monthlyGoal.textContent = `${totalDiscoveries}/10 uploads`;
                }

                const goalProgress = document.querySelector('.bg-orange-600.h-2.rounded-full');
                if (goalProgress) {
                    const progress = Math.min((totalDiscoveries / 10) * 100, 100);
                    goalProgress.style.width = `${progress}%`;
                }
            }

            function updateFoodDiscoveries() {
                const foodContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.gap-4');
                if (!foodContainer) return;

                if (userFoods.length === 0) {
                    foodContainer.innerHTML = `
                        <div class="col-span-2 text-center py-8">
                            <i class="fas fa-utensils text-4xl text-gray-300 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">No food discoveries yet</h3>
                            <p class="text-gray-500 mb-4">Start sharing your amazing food finds!</p>
                            <a href="upload.html" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                                Upload Your First Discovery
                            </a>
                        </div>
                    `;
                    return;
                }

                foodContainer.innerHTML = userFoods.slice(0, 4).map(food => {
                    const imageUrl = food.images && food.images.length > 0 ? food.images[0] : 'https://via.placeholder.com/100x100?text=No+Image';
                    const date = new Date(food.createdAt).toLocaleDateString();
                    const priceDisplay = food.price ? `₹${food.price}` : food.priceRange;
                    
                    return `
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-start space-x-3">
                                <img src="${imageUrl}" alt="${food.title}" class="w-16 h-16 rounded-lg object-cover">
                                <div class="flex-1">
                                    <h5 class="font-medium text-gray-900">${food.title}</h5>
                                    <p class="text-sm text-gray-600">${food.vendorName || 'Unknown Vendor'}</p>
                                    <p class="text-sm text-gray-500">${food.address}, ${food.city}</p>
                                    <div class="flex items-center mt-2">
                                        <div class="flex items-center text-yellow-500">
                                            <i class="fas fa-star text-sm mr-1"></i>
                                            <span class="text-sm text-gray-700">4.5</span>
                                        </div>
                                        <span class="mx-2 text-gray-300">•</span>
                                        <span class="text-sm text-gray-500">${priceDisplay}</span>
                                        <span class="mx-2 text-gray-300">•</span>
                                        <span class="text-sm text-gray-500">${date}</span>
                                    </div>
                                </div>
                                <div class="flex flex-col space-y-2">
                                    <button class="text-gray-400 hover:text-orange-600 transition-colors" onclick="editFood('${food._id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-red-600 transition-colors" onclick="deleteFood('${food._id}', '${food.title}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                if (userFoods.length > 4) {
                    const viewAllLink = document.querySelector('a[href="#"]');
                    if (viewAllLink) {
                        viewAllLink.textContent = `View All ${userFoods.length} Discoveries`;
                        viewAllLink.href = 'search.html';
                    }
                }
            }

            // Global functions for edit and delete
            window.editFood = function(foodId) {
                showNotification('Edit functionality coming soon!', 'info');
            };

            window.deleteFood = async function(foodId, foodTitle) {
                if (confirm(`Are you sure you want to delete "${foodTitle}"?`)) {
                    try {
                        const response = await fetch('https://local-food-backend.onrender.com/api/foods/${foodId}', {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `Bearer ${token}`
                            }
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            showNotification(`${foodTitle} deleted successfully`, 'success');
                            // Reload the foods
                            loadUserFoods();
                        } else {
                            showNotification(data.message || 'Failed to delete food item', 'error');
                        }
                    } catch (error) {
                        console.error('Delete error:', error);
                        showNotification('Error deleting food item', 'error');
                    }
                }
            };

            // Add hover effects for food cards
            document.addEventListener('mouseover', function(e) {
                const foodCard = e.target.closest('.border.border-gray-200.rounded-lg');
                if (foodCard) {
                    foodCard.classList.add('border-orange-300', 'bg-orange-50');
                }
            });

            document.addEventListener('mouseout', function(e) {
                const foodCard = e.target.closest('.border.border-gray-200.rounded-lg');
                if (foodCard) {
                    foodCard.classList.remove('border-orange-300', 'bg-orange-50');
                }
            });
        });
    </script>
</body>
</html>
